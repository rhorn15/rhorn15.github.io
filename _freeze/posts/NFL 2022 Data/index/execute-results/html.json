{
  "hash": "b7afd0b42740a8bc169626b84421e0ba",
  "result": {
    "markdown": "---\ntitle: \"NFL 2022 Data\"\nauthor: \"Ryan Horn\"\ndate: \"2023-12-11\"\ncategories: [news]\n---\n\n\nHere is some analytics in relation to Data from the 2022 NFL season!\n\n![](NFL image.png)\n\n\n## Q2a \n\nIn data.frame, NFL2022_stuffs, remove observations for which values of posteam is missing.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n:::\n:::\n\n\n*Answer:*\n\n\n::: {.cell}\n\n```{.r .cell-code}\nNFL2022_stuffs_cleaned <- NFL2022_stuffs %>% \n  filter(!is.na(posteam))\n\nhead(NFL2022_stuffs_cleaned)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  play_id         game_id drive week posteam qtr down half_seconds_remaining\n1      43 2022_01_BAL_NYJ     1    1     NYJ   1   NA                   1800\n2      68 2022_01_BAL_NYJ     1    1     NYJ   1    1                   1796\n3      89 2022_01_BAL_NYJ     1    1     NYJ   1    1                   1769\n4     115 2022_01_BAL_NYJ     1    1     NYJ   1    2                   1765\n5     136 2022_01_BAL_NYJ     1    1     NYJ   1    3                   1741\n6     172 2022_01_BAL_NYJ     1    1     NYJ   1    4                   1733\n  pass        wp\n1    0 0.5462618\n2    0 0.5469690\n3    1 0.5725734\n4    0 0.5545366\n5    1 0.5401673\n6    0 0.4880532\n```\n:::\n:::\n\n\n## Q2b\n\n-Summarize the mean value of pass for each posteam when all the following conditions hold:\n\n1. wp is greater than 20% and less than 75%;\n\n2. down is less than or equal to 2; and\n\n3. half_seconds_remaining is greater than 120\n\n*Answer:*\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfiltered_data <- NFL2022_stuffs %>%\n  filter(\n    !is.na(posteam),       \n    wp > 0.2 & wp < 0.75,   \n    down <= 2,              \n    half_seconds_remaining > 120  \n  )\n\nsummary_data <- filtered_data %>%\n  group_by(posteam) %>%\n  summarize(mean_pass = mean(pass, na.rm = TRUE))\n\nprint(summary_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 32 × 2\n   posteam mean_pass\n   <chr>       <dbl>\n 1 ARI         0.553\n 2 ATL         0.4  \n 3 BAL         0.520\n 4 BUF         0.604\n 5 CAR         0.458\n 6 CHI         0.420\n 7 CIN         0.657\n 8 CLE         0.491\n 9 DAL         0.474\n10 DEN         0.493\n# ℹ 22 more rows\n```\n:::\n:::\n\n## Q2c\n\n-Provide both (1) a ggplot code with geom_point() using the resulting data.frame in Q2b and (2) a simple comments to describe the mean value of pass for each posteam.\n  *In the ggplot, reorder the posteam categories based on the mean value of pass in ascending or in descending order.*\n  \n*Answer:*\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\n# Load necessary libraries\nlibrary(ggplot2)\n\n\nsummary_data <- summary_data %>%\n  mutate(posteam = factor(posteam, levels = summary_data[order(mean_pass, decreasing = TRUE), \"posteam\"]))\n\n\nggplot(summary_data, aes(x = posteam, y = mean_pass, label = posteam)) +\n  geom_point() +\n  geom_text(nudge_y = 0.02, size = 3, check_overlap = TRUE) + \n  labs(title = \"Mean Value of pass for Each posteam\",\n       x = \"posteam\",\n       y = \"Mean pass\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 32 rows containing missing values (`geom_text()`).\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n## Q2d\n\n- Create the data.frame, NFL2022_stuffs_EPA, that includes\n\n1. All the variables in the data.frame, NFL2022_stuffs;\n\n2. The variables, passer, receiver, and epa, from the data.frame, NFL2022_epa. by joining the two data.frames.\n\n- In the resulting data.frame, NFL2022_stuffs_EPA, remove observations with NA in passer.\n  \n  \n*Answer:*\n\n\n::: {.cell}\n\n```{.r .cell-code}\nNFL2022_epa <- read.csv('https://bcdanl.github.io/data/NFL2022_epa.csv')\n\nNFL2022_stuffs_EPA <- left_join(NFL2022_stuffs, NFL2022_epa, by = c(\"play_id\", \"game_id\", \"drive\", \"posteam\"))\n\nNFL2022_stuffs_EPA <- NFL2022_stuffs_EPA %>%\n  filter(!is.na(passer))\n\nhead(NFL2022_stuffs_EPA)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  play_id         game_id drive week posteam qtr down half_seconds_remaining\n1      89 2022_01_BAL_NYJ     1    1     NYJ   1    1                   1769\n2     136 2022_01_BAL_NYJ     1    1     NYJ   1    3                   1741\n3     202 2022_01_BAL_NYJ     2    1     BAL   1    1                   1722\n4     230 2022_01_BAL_NYJ     2    1     BAL   1    2                   1701\n5     301 2022_01_BAL_NYJ     2    1     BAL   1    2                   1579\n6     412 2022_01_BAL_NYJ     3    1     NYJ   1    2                   1451\n  pass        wp   receiver    passer         epa\n1    1 0.5725734  Mi.Carter  J.Flacco -0.49219242\n2    1 0.5401673       <NA>  J.Flacco -2.40220026\n3    1 0.4958201  R.Bateman L.Jackson  0.07512748\n4    1 0.4965942 D.Duvernay L.Jackson -0.10512029\n5    1 0.5067707 D.Duvernay L.Jackson  0.41113183\n6    1 0.5001284    Br.Hall  J.Flacco -0.17972556\n```\n:::\n:::\n\n\n## Q2e\n\n- Provide both (1) a single ggplot and (2) a simple comment to describe the NFL weekly trend of weekly mean value of epa for each of the following two passers,\n\n1. \"J.Allen\"\n2. \"P.Mahomes\"\n\n*Answer:*\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(NFL2022_stuffs_EPA, aes(x = week, y = epa, color = passer, linetype = passer)) +\n  geom_line(linewidth = 1.2) +\n  labs(title = \"NFL Weekly Trend of Mean EPA for Passers\",\n       x = \"Week\",\n       y = \"Mean EPA\") +\n  scale_color_manual(values = c(\"J.Allen\" = \"blue\", \"P.Mahomes\" = \"red\")) +\n  scale_linetype_manual(values = c(\"J.Allen\" = \"solid\", \"P.Mahomes\" = \"dashed\")) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\nThis line plot illustrates the weekly trend of the mean value of Expected Points Added (EPA) for two excellent passers. \n\n## Q2f\n\n- Calculate the difference between the mean value of epa for \"J.Allen\" the mean value of epa for \"P.Mahomes\" for each value of week.\n\n*Answer:*\n\n\n::: {.cell}\n\n```{.r .cell-code}\nepa_difference <- NFL2022_stuffs_EPA %>%\n  group_by(week) %>%\n  summarise(mean_epa_difference = mean(epa[passer == \"J.Allen\"]) - mean(epa[passer == \"P.Mahomes\"]))\n\nprint(epa_difference)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 22 × 2\n    week mean_epa_difference\n   <int>               <dbl>\n 1     1             -0.169 \n 2     2              0.339 \n 3     3             -0.0763\n 4     4             -0.0803\n 5     5              0.325 \n 6     6              0.173 \n 7     7            NaN     \n 8     8            NaN     \n 9     9             -0.304 \n10    10             -0.429 \n# ℹ 12 more rows\n```\n:::\n:::\n\n\n## Q2g\n\n- Summarize the resulting data.frame in Q2d, with the following four variables:\n\n  - posteam: String abbreviation for the team with possession.\n  - passer: Name of the player who passed a ball to a receiver by initially taking a three-step drop, and backpedaling into the pocket to make a pass. (Mostly, they are quarterbacks.)\n  - mean_epa: Mean value of epa in 2022 for each passer\n  - n_pass: Number of observations for each passer\n- Then find the top 10 NFL passers in 2022 in terms of the mean value of epa, conditioning that n_pass must be greater than or equal to the third quantile level of n_pass.\n\n*Answer:*\n\n\n::: {.cell}\n\n```{.r .cell-code}\npasser_summary <- NFL2022_stuffs_EPA %>%\n  group_by(posteam, passer) %>%\n  summarise(\n    mean_epa = mean(epa, na.rm = TRUE),\n    n_pass = n()\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'posteam'. You can override using the\n`.groups` argument.\n```\n:::\n\n```{.r .cell-code}\nquantile_threshold <- quantile(passer_summary$n_pass, 0.75)\n\ntop_passers <- passer_summary %>%\n  filter(n_pass >= quantile_threshold) %>%\n  arrange(desc(mean_epa)) %>%\n  slice_head(n = 10)\n\nprint(top_passers)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 29 × 4\n# Groups:   posteam [29]\n   posteam passer     mean_epa n_pass\n   <chr>   <chr>         <dbl>  <int>\n 1 ARI     K.Murray     0.0163    465\n 2 ATL     M.Mariota    0.0251    370\n 3 BAL     L.Jackson    0.0549    398\n 4 BUF     J.Allen      0.172     785\n 5 CHI     J.Fields    -0.0455    469\n 6 CIN     J.Burrow     0.153     854\n 7 CLE     J.Brissett   0.0912    445\n 8 DAL     D.Prescott   0.147     529\n 9 DEN     R.Wilson    -0.0163    609\n10 DET     J.Goff       0.171     661\n# ℹ 19 more rows\n```\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}